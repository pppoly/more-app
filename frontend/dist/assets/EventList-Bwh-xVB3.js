import{d as F,u as M,l as N,r as c,c as w,g as S,o as $,m as R,b as n,e as o,h as a,p as j,q,s as u,j as v,t as r,v as K,x as G,F as C,f as x,y as L,i as H,n as J,z as y,k as O,a as P,_ as Q}from"./index-CT-XDF2b.js";const W={class:"events-mobile"},X={class:"app-bar"},Y={key:1,class:"user-avatar"},Z={class:"search-section"},ee={class:"search-box"},te={class:"chip-container"},se={class:"chip-row"},ae=["onClick"],oe={key:0,class:"status"},le={key:1,class:"status error"},ne={key:2,class:"list-wrapper"},re={key:0,class:"empty-state"},ce={key:1,class:"event-list"},ie=["onClick"],de={key:0,class:"event-card__fallback"},ue={class:"event-card__body"},ve={class:"event-card__title"},_e={class:"event-card__meta"},pe={class:"event-card__location"},me={class:"event-card__footer"},ye={class:"tab-bar"},he="å‚åŠ æž : ãƒã‚§ãƒƒã‚¯ä¸­",ge=F({__name:"EventList",setup(ke){const D=M(),{user:h}=N(),g=c([]),_=c(!0),i=c(null),p=c(""),I=[{label:"å…¨éƒ¨",value:"all"},{label:"è¦ªå­",value:"kids"},{label:"ã‚¹ãƒãƒ¼ãƒ„",value:"sports"},{label:"è¨€èªžäº¤æ›",value:"language"},{label:"æ–°æ¥æ—¥æœ¬",value:"newlife"},{label:"ä»•äº‹ãƒ»ã‚¹ã‚­ãƒ«",value:"career"}],d=c("all"),T=async()=>{_.value=!0,i.value=null;try{g.value=await O()}catch(t){i.value=t instanceof Error?t.message:"Failed to load events"}finally{_.value=!1}},k=w(()=>{const t=p.value.toLowerCase();return g.value.filter(e=>{const l=(e.category||"other").toLowerCase(),s=d.value==="all"||l.includes(d.value),m=b(e).toLowerCase(),A=!t||m.includes(t)||e.locationText.toLowerCase().includes(t);return s&&A})}),U=w(()=>{var t,e,l;return((l=(e=(t=h.value)==null?void 0:t.name)==null?void 0:e.charAt(0))==null?void 0:l.toUpperCase())??"U"}),b=t=>S(t.title),E=t=>new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",weekday:"short"}),f=t=>{const e=new Date,l=new Date(t.startTime);return t.status==="open"&&l>e?{text:"å—ä»˜ä¸­",class:"open"}:{text:"çµ‚äº†",class:"closed"}},z=t=>{var e;return(((e=t.community.name)==null?void 0:e.charAt(0))??"M").toUpperCase()},B=t=>t.coverImageUrl?{backgroundImage:`url(${P(t.coverImageUrl)})`}:{background:"linear-gradient(135deg, var(--color-primary), #4cd964)"},V=t=>{D.push(`/events/${t}`)};return $(T),(t,e)=>{const l=R("RouterLink");return o(),n("section",W,[a("header",X,[e[2]||(e[2]=a("div",{class:"logo-circle"},"M",-1)),q(h)?(o(),n("div",Y,r(U.value),1)):(o(),j(l,{key:0,class:"login-chip",to:"/organizer/apply"},{default:u(()=>[...e[1]||(e[1]=[v("ãƒ­ã‚°ã‚¤ãƒ³",-1)])]),_:1}))]),a("div",Z,[a("div",ee,[e[3]||(e[3]=a("span",{class:"icon"},"ðŸ”",-1)),K(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),type:"search",placeholder:"ã‚¤ãƒ™ãƒ³ãƒˆ / ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’æ¤œç´¢"},null,512),[[G,p.value]])]),a("div",te,[e[4]||(e[4]=a("p",{class:"chip-label"},"ã‚¿ã‚°",-1)),a("div",se,[(o(),n(C,null,x(I,s=>a("button",{key:s.value,class:L(["chip",{active:d.value===s.value}]),type:"button",onClick:m=>d.value=s.value},r(s.label),11,ae)),64))])])]),_.value?(o(),n("p",oe,"èª­ã¿è¾¼ã¿ä¸­...")):i.value?(o(),n("p",le,r(i.value),1)):(o(),n("div",ne,[k.value.length?(o(),n("ul",ce,[(o(!0),n(C,null,x(k.value,s=>(o(),n("li",{key:s.id,class:"event-card",onClick:m=>V(s.id)},[a("div",{class:"event-card__cover",style:J(B(s))},[s.coverImageUrl?H("",!0):(o(),n("span",de,r(z(s)),1))],4),a("div",ue,[a("p",ve,r(b(s)),1),a("p",_e,r(E(s.startTime)),1),a("p",pe,r(s.locationText),1),a("div",me,[a("span",{class:L(["status-pill",f(s).class])},r(f(s).text),3),a("span",{class:"capacity"},r(he))])])],8,ie))),128))])):(o(),n("div",re," ç¾åœ¨å…¬é–‹ä¸­ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ "))])),a("nav",ye,[y(l,{to:"/events",class:"tab-item active"},{default:u(()=>[...e[5]||(e[5]=[v("ã‚¤ãƒ™ãƒ³ãƒˆ",-1)])]),_:1}),y(l,{to:"/community/musashino-kids",class:"tab-item"},{default:u(()=>[...e[6]||(e[6]=[v("ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£",-1)])]),_:1}),y(l,{to:{name:"console-home"},class:"tab-item"},{default:u(()=>[...e[7]||(e[7]=[v("ã‚³ãƒ³ã‚½ãƒ¼ãƒ«",-1)])]),_:1})])])}}}),fe=Q(ge,[["__scopeId","data-v-452d9d64"]]);export{fe as default};
