import{c,r as v}from"./index-DncFUGrq.js";const i="moreapp_favorites";function n(){return typeof window<"u"&&typeof window.localStorage<"u"}const t=v([]);let r=!1;const d=()=>{if(!(r||!n())){r=!0;try{const e=window.localStorage.getItem(i);t.value=e?JSON.parse(e):[]}catch(e){console.warn("Failed to load favorites",e),t.value=[]}}},s=()=>{if(n())try{window.localStorage.setItem(i,JSON.stringify(t.value))}catch(e){console.warn("Failed to save favorites",e)}},a=e=>e?t.value.some(o=>o.id===e):!1,u=e=>{if(!e.id)return;const o=t.value.findIndex(f=>f.id===e.id);o>=0?t.value[o]=e:t.value.unshift(e),s()},l=e=>{t.value=t.value.filter(o=>o.id!==e),s()},w=e=>{a(e.id)?l(e.id):u(e)};function F(){d();const e=c(()=>t.value.length);return{favorites:t,favoriteCount:e,isFavorite:a,addFavorite:u,removeFavorite:l,toggleFavorite:w}}export{F as u};
