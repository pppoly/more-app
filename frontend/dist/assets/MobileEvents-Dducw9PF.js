import{d as B,u as R,r as _,c as C,g as F,o as V,a as n,b as c,e,F as h,f as g,t as r,h as W,n as J,i as G,w as H,j as T,k as K,_ as Q}from"./index-OEpVzuiB.js";const X={class:"mobile-events-page"},Y={key:0,class:"state-section"},Z={key:1,class:"state-section"},tt={class:"state-card state-card--error"},at={class:"state-card__body"},et={class:"state-card__message"},st=["disabled"],ot={key:2,class:"card-list"},nt={key:0,class:"state-empty"},ct=["onClick"],rt={class:"event-card__cover-meta"},it={class:"event-card__avatar-stack"},lt=["src"],ut={class:"event-card__capacity-pill"},dt={class:"event-card__details"},mt={class:"event-card__title"},pt={class:"event-card__meta"},_t={class:"event-card__community-row"},ht=["onClick"],gt={class:"event-card__community-name"},ft={class:"mobile-bottom-nav"},vt=["onClick"],yt={class:"bottom-nav__label"},bt=B({__name:"MobileEvents",setup(kt){const d=R(),l=_([]),f=_(!0),m=_(null),x=[{id:"home",label:"ãƒˆãƒƒãƒ—",path:"/",icon:"i-lucide-home"},{id:"events",label:"æ´»å‹•",path:"/events",icon:"i-lucide-calendar-days"},{id:"me",label:"ãƒžã‚¤ãƒšãƒ¼ã‚¸",path:"/me",icon:"i-lucide-user-round"},{id:"settings",label:"è¨­å®š",path:"/settings",icon:"i-lucide-cog"}],v=[{id:"mock-001",status:"open",title:{ja:"ä»£ã€…æœ¨å…¬åœ’ãƒ”ã‚¯ãƒ‹ãƒƒã‚¯äº¤æµ"},description:null,locationText:"ä»£ã€…æœ¨å…¬åœ’",startTime:new Date().toISOString(),coverImageUrl:"https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?auto=format&fit=crop&w=1200&q=80",category:"parent",community:{id:"c-1",name:"Tokyo Language Lounge"},ticketTypes:[{price:0}],config:{currentParticipants:24,capacity:30}},{id:"mock-002",status:"closed",title:{ja:"èªžå­¦äº¤æ›ãƒŸãƒ¼ãƒˆã‚¢ãƒƒãƒ—"},description:null,locationText:"æ¸‹è°·ã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«ã‚¹ã‚¯ã‚¨ã‚¢",startTime:new Date(Date.now()+864e5).toISOString(),coverImageUrl:"https://images.unsplash.com/photo-1515168833906-d2a3b82b302a?auto=format&fit=crop&w=1200&q=80",category:"language",community:{id:"c-2",name:"SOCIALMORE"},ticketTypes:[{price:1500}],config:{currentParticipants:18,capacity:20}}],p=_(!1),y=async()=>{f.value=!0,m.value=null;try{l.value=await K(),l.value.length||(l.value=v)}catch(t){console.warn("fetchEvents failed, using fallback data",t),l.value=v,m.value="ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç’°å¢ƒã‚’ç¢ºèªã—ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚"}finally{f.value=!1}},I=async()=>{p.value=!0,await y(),p.value=!1},L=t=>{const s={parent:"è¦ªå­",sports:"ã‚¹ãƒãƒ¼ãƒ„",language:"èªžå­¦",work:"ã‚¹ã‚­ãƒ«",career:"ã‚­ãƒ£ãƒªã‚¢",kids:"ã‚­ãƒƒã‚º"},a=(t??"").toLowerCase();return s[a]??"ã‚¤ãƒ™ãƒ³ãƒˆ"},b=["https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1448932223592-d1fc686e76ea?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1515168833906-d2a3b82b302a?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1454496522488-7a8e488e8606?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1454165205744-3b78555e5572?auto=format&fit=crop&w=1200&q=80"],E=(t,s)=>{let a=0;for(let o=0;o<t.length;o+=1)a=(a<<5)-a+t.charCodeAt(o),a|=0;return Math.abs(a)%s},$=t=>{var a;if(t.coverImageUrl)return{backgroundImage:`url(${t.coverImageUrl})`,backgroundPosition:"center",backgroundSize:"cover"};const s=E(t.id||((a=t.title)==null?void 0:a.toString())||"fallback",b.length);return{backgroundImage:`url(${b[s]})`,backgroundPosition:"center",backgroundSize:"cover"}},k=C(()=>l.value.map(t=>{var a,o,i,u,w,S;const s=$(t);return{id:t.id,title:F(t.title),categoryLabel:L(t.category),dateText:P(t.startTime),timeText:U(t.startTime),locationText:t.locationText,communityName:((a=t.community)==null?void 0:a.name)??"SOCIALMORE",communitySlug:((o=t.community)==null?void 0:o.slug)??((i=t.community)==null?void 0:i.id)??"club",communityInitial:((S=(w=(u=t.community)==null?void 0:u.name)==null?void 0:w.charAt(0))==null?void 0:S.toUpperCase())??"M",statusLabel:N(t.status),statusClass:A(t.status),capacityText:z(t),hasCover:!!t.coverImageUrl,coverStyle:s,attendees:O(t)}})),q=t=>{d.push({name:"event-detail",params:{eventId:t}})},D=t=>{t&&d.push({name:"community-portal",params:{slug:t}})},M=t=>{d.push(t)},j=C(()=>{const t=d.currentRoute.value.path;return t.startsWith("/settings")?"settings":t.startsWith("/me")?"me":t==="/"?"home":"events"}),N=t=>t==="open"?"å‚åŠ å‹Ÿé›†ä¸­":t==="closed"?"å—ä»˜çµ‚äº†":"å‘ŠçŸ¥äºˆå®š",A=t=>t==="open"?"event-card__status--open":t==="closed"?"event-card__status--closed":"event-card__status--info",P=t=>{const s=new Date(t);return`${(s.getMonth()+1).toString().padStart(2,"0")}/${s.getDate().toString().padStart(2,"0")}`},U=t=>new Date(t).toLocaleString("ja-JP",{month:"long",day:"numeric",weekday:"short",hour:"2-digit",minute:"2-digit"}),z=t=>{var i,u;const s=t.config??{},a=s.currentParticipants??0,o=s.capacity??((u=(i=t.ticketTypes)==null?void 0:i[0])==null?void 0:u.quota)??0;return o?`${a}/${o}`:"10/50"},O=t=>((t.config??{}).attendeeAvatars??["https://randomuser.me/api/portraits/women/19.jpg","https://randomuser.me/api/portraits/men/32.jpg","https://randomuser.me/api/portraits/women/45.jpg","https://randomuser.me/api/portraits/men/52.jpg","https://randomuser.me/api/portraits/women/21.jpg"]).slice(0,10);return V(y),(t,s)=>(c(),n("div",X,[f.value?(c(),n("section",Y,[(c(),n(h,null,g(3,a=>e("article",{key:a,class:"event-card event-card--skeleton"})),64))])):m.value?(c(),n("section",Z,[e("article",tt,[s[1]||(s[1]=e("div",{class:"state-card__icon"},"ðŸš§",-1)),e("div",at,[s[0]||(s[0]=e("p",{class:"state-card__title"},"æ´»å‹•ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ",-1)),e("p",et,r(m.value),1)]),e("button",{type:"button",class:"state-card__action",onClick:I,disabled:p.value},r(p.value?"ãƒªãƒˆãƒ©ã‚¤ä¸­â€¦":"å†èª­ã¿è¾¼ã¿"),9,st)])])):(c(),n("section",ot,[k.value.length?W("",!0):(c(),n("p",nt,"æ¡ä»¶ã«åˆã†ã‚¤ãƒ™ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚")),(c(!0),n(h,null,g(k.value,a=>(c(),n("article",{key:a.id,class:"event-card",onClick:o=>q(a.id)},[e("figure",{class:"event-card__cover",style:J(a.coverStyle)},[e("div",rt,[e("div",it,[(c(!0),n(h,null,g(a.attendees,(o,i)=>(c(),n("img",{key:`${a.id}-attendee-${i}`,src:o,alt:"attendee"},null,8,lt))),128))]),e("span",ut,r(a.capacityText),1)])],4),e("div",dt,[e("h2",mt,r(a.title),1),e("p",pt,[s[2]||(s[2]=e("span",{class:"i-lucide-clock-8 text-xs"},null,-1)),G(" "+r(a.timeText),1)]),e("div",_t,[e("button",{type:"button",class:"event-card__community-avatar",onClick:H(o=>D(a.communitySlug),["stop"])},[e("span",null,r(a.communityInitial),1)],8,ht),e("p",gt,r(a.communityName),1)])])],8,ct))),128))])),e("nav",ft,[(c(),n(h,null,g(x,a=>e("button",{key:a.id,class:T(["bottom-nav__item",{"bottom-nav__item--active":a.id===j.value}]),onClick:o=>M(a.path)},[e("span",{class:T(["bottom-nav__icon",a.icon])},null,2),e("span",yt,r(a.label),1)],10,vt)),64))])]))}}),St=Q(bt,[["__scopeId","data-v-d0c50f9c"]]);export{St as default};
