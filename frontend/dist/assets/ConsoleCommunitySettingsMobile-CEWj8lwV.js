import{d as x,z as C,r as d,A as g,o as L,a as T,e as t,t as b,v as i,x as r,H as _,q as w,u as k,a4 as D,g as M,aa as V,b as z,_ as B}from"./index-OEpVzuiB.js";const I={class:"community-settings"},S={class:"settings-head"},U={class:"card"},j={class:"field"},A={class:"field"},R={class:"field"},q={class:"field"},E={class:"actions"},F=["disabled"],H=["disabled"],N=x({__name:"ConsoleCommunitySettingsMobile",setup($){const v=C(),c=k(),n=v.params.communityId,u=d(!1),a=d(!1),p=d(null),s=g({name:"",description:"",labelsText:"",visibleLevel:"public"}),y=l=>l.trim(),m=async()=>{var l;if(n){u.value=!0;try{const e=await D(n);p.value=e,s.name=e.name,s.description=M(e.description),s.labelsText=((l=e.labels)==null?void 0:l.join(", "))??"",s.visibleLevel=e.visibleLevel??"public"}finally{u.value=!1}}},f=async()=>{if(!(!n||!p.value)){a.value=!0;try{const l=y(s.description),e={description:{ja:l,zh:l,en:l},labels:s.labelsText.split(",").map(o=>o.trim()).filter(Boolean),visibleLevel:s.visibleLevel};await V(n,e),await m(),alert("社群情報を更新しました。")}catch(l){console.error("Failed to update community",l),alert("社群情報の更新に失敗しました。")}finally{a.value=!1}}};return L(()=>{m()}),(l,e)=>(z(),T("div",I,[t("header",S,[e[5]||(e[5]=t("p",{class:"eyebrow"},"社群設定",-1)),t("h1",null,b(s.name||"コミュニティ"),1),e[6]||(e[6]=t("p",{class:"hint"},"社群介紹與標籤會顯示在公開頁面與 AI 助手的歡迎語中。",-1))]),t("section",U,[t("label",j,[e[7]||(e[7]=t("span",null,"社群名稱",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),placeholder:"コミュニティ名",disabled:""},null,512),[[r,s.name]])]),t("label",A,[e[8]||(e[8]=t("span",null,"社群介紹",-1)),i(t("textarea",{rows:"8","onUpdate:modelValue":e[1]||(e[1]=o=>s.description=o),placeholder:"コミュニティの目的や活動内容、歓迎する人などを入力してください。"},null,512),[[r,s.description]]),e[9]||(e[9]=t("small",null,"該内容會同步給多語言版本與活動助手。",-1))]),t("label",R,[e[10]||(e[10]=t("span",null,"標籤（用逗號分隔）",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>s.labelsText=o),placeholder:"community, collaboration, npo"},null,512),[[r,s.labelsText]])]),t("label",q,[e[12]||(e[12]=t("span",null,"公開設定",-1)),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.visibleLevel=o)},[...e[11]||(e[11]=[t("option",{value:"public"},"公開（誰でも閲覧可）",-1),t("option",{value:"members"},"メンバー限定",-1),t("option",{value:"private"},"非公開",-1)])],512),[[_,s.visibleLevel]])])]),t("div",E,[t("button",{type:"button",class:"ghost",disabled:a.value,onClick:e[4]||(e[4]=o=>w(c).back())},"戻る",8,F),t("button",{type:"button",class:"primary",disabled:a.value,onClick:f},b(a.value?"保存中...":"保存する"),9,H)])]))}}),J=B(N,[["__scopeId","data-v-994969a0"]]);export{J as default};
