import{d as g,c as b,A as f,r as c,o as k,b as e,h as s,i as _,j as A,t as a,F as p,f as v,a7 as C,e as l,y as w,_ as D}from"./index-BGcABSEi.js";const V={class:"assistant-dashboard"},x={class:"dashboard-head"},E=["disabled"],I={key:0,class:"stats-grid"},N={class:"stat-card"},S={class:"stat-card"},B={class:"stat-card"},F={key:1,class:"breakdown"},L={class:"breakdown-card"},P={class:"breakdown-card"},R={class:"logs-section"},T={class:"logs-head"},j={key:0},z={key:0,class:"error-banner"},M={key:1,class:"placeholder"},q={key:2,class:"log-list"},G={class:"log-meta"},H={class:"log-title"},J={class:"log-detail"},K={class:"log-time"},O=g({__name:"ConsoleEventAssistantDashboard",setup(Q){const y=f(),m=b(()=>y.params.communityId),n=c(null),u=c(!1),d=c(null),h=async()=>{if(m.value){u.value=!0,d.value=null;try{n.value=await C(m.value)}catch(i){d.value=i instanceof Error?i.message:"加载仪表盘失败"}finally{u.value=!1}}};return k(h),(i,t)=>(l(),e("div",V,[s("header",x,[t[1]||(t[1]=s("div",null,[s("p",{class:"dashboard-label"},"AI助手"),s("h1",null,"Prompt 迭代仪表盘")],-1)),s("button",{type:"button",class:"refresh-button",onClick:h,disabled:u.value},[...t[0]||(t[0]=[s("span",{class:"i-lucide-refresh-ccw mr-1"},null,-1),A(" 刷新 ",-1)])],8,E)]),n.value?(l(),e("section",I,[s("article",N,[t[2]||(t[2]=s("p",null,"记录总数",-1)),s("strong",null,a(n.value.stats.totalSessions),1)]),s("article",S,[t[3]||(t[3]=s("p",null,"完成方案",-1)),s("strong",null,a(n.value.stats.readySessions),1),s("span",null,a(n.value.stats.readyRate)+"%",1)]),s("article",B,[t[4]||(t[4]=s("p",null,"平均回合",-1)),s("strong",null,a(n.value.stats.averageTurns),1)])])):_("",!0),n.value?(l(),e("section",F,[s("div",L,[t[5]||(t[5]=s("h3",null,"Prompt 版本",-1)),s("ul",null,[(l(!0),e(p,null,v(n.value.stats.promptVersions,(o,r)=>(l(),e("li",{key:r},[s("span",null,a(r),1),s("strong",null,a(o),1)]))),128))])]),s("div",P,[t[6]||(t[6]=s("h3",null,"语言分布",-1)),s("ul",null,[(l(!0),e(p,null,v(n.value.stats.languages,(o,r)=>(l(),e("li",{key:r},[s("span",null,a(r),1),s("strong",null,a(o),1)]))),128))])])])):_("",!0),s("section",R,[s("div",T,[t[7]||(t[7]=s("h2",null,"最近对话",-1)),u.value?(l(),e("span",j,"读取中...")):_("",!0)]),d.value?(l(),e("div",z,a(d.value),1)):n.value?(l(),e("ul",q,[(l(!0),e(p,null,v(n.value.logs,o=>(l(),e("li",{key:o.id,class:"log-item"},[s("div",G,[s("p",H,a(o.summary||"未命名草案"),1),s("span",{class:w(["log-status",o.status])},a(o.status??"collecting"),3)]),s("p",J," prompt: "+a(o.promptVersion||"N/A")+" · 回合: "+a(o.turnCount??0)+" · 语言: "+a(o.language||"未知"),1),s("p",K,a(new Date(o.createdAt).toLocaleString()),1)]))),128))])):(l(),e("div",M,"暂无数据"))])]))}}),W=D(O,[["__scopeId","data-v-39e7f7a5"]]);export{W as default};
