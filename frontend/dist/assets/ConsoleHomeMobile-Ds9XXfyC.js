import{d as j,$ as A,r as w,c as u,g as F,B as R,o as V,a as r,e as t,i as y,t as a,j as c,h as z,F as H,f as J,a1 as U,u as q,b as d,_ as G}from"./index-OEpVzuiB.js";const K={class:"console-home"},O={class:"hero-card"},Q={class:"hero-title"},W={class:"hero-role"},X={class:"hero-stats"},Y={class:"hero-stat"},Z={class:"hero-stat"},tt={class:"hero-stat"},st={class:"action-grid"},et={class:"events-section"},nt={class:"event-cards"},ot=["onClick"],lt={class:"event-date"},at={class:"event-meta"},it={key:0,class:"event-empty"},ut=j({__name:"ConsoleHomeMobile",setup(ct){const i=q(),m=A(),v=w([]),C=w(!1),p=u(()=>m.getActiveCommunity()),_=u(()=>{var e;return((e=p.value)==null?void 0:e.name)??""}),n=u(()=>m.activeCommunityId.value),o=u(()=>!!n.value),E=u(()=>{var s;switch((s=p.value)==null?void 0:s.role){case"owner":return"主催者";case"admin":return"管理者";default:return"メンバー"}}),b=u(()=>({monthRevenueText:"¥0",eventCount:v.value.length,registrationCount:"--"})),g=u(()=>v.value.slice(0,5).map(e=>({id:e.id,title:F(e.title),status:e.status,dateTimeText:$(e.startTime,e.endTime),entrySummary:e.visibility==="public"?"公開イベント":"限定公開",coverUrl:"https://placehold.co/120x120?text=Event"}))),h=async()=>{if(n.value){C.value=!0;try{v.value=await U(n.value)}catch(e){console.error("Failed to load console events",e)}finally{C.value=!1}}};R(n,()=>{n.value&&h()});const M=()=>{window.dispatchEvent(new CustomEvent("console:open-community-picker"))},k=()=>{i.push({name:"ConsoleMobileCommunityCreate"})},T=()=>{i.push({name:"ConsoleMobilePayout"})},S=()=>{i.push({name:"ConsoleMobileSubscription"})},P=()=>{n.value&&i.push({name:"ConsoleMobileCommunitySettings",params:{communityId:n.value}})},B=()=>{var e;(e=p.value)!=null&&e.slug&&i.push({name:"community-portal",params:{slug:p.value.slug}})},f=()=>{n.value&&i.push({name:"ConsoleMobileCommunityEvents",params:{communityId:n.value}})},I=e=>{i.push({name:"ConsoleMobileEventManage",params:{eventId:e}})},L=()=>{n.value&&i.push({name:"ConsoleMobileEventCreate",params:{communityId:n.value}})},$=(e,s)=>{const l=new Date(e).toLocaleString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});if(!s)return l;const x=new Date(s).toLocaleString("ja-JP",{hour:"2-digit",minute:"2-digit"});return`${l}〜${x}`},D=e=>{switch(e){case"open":return"受付中";case"closed":return"終了";default:return"下書き"}},N=e=>{switch(e){case"open":return"bg-emerald-100 text-emerald-700";case"closed":return"bg-slate-100 text-slate-500";default:return"bg-amber-100 text-amber-700"}};return V(async()=>{await m.loadCommunities(),n.value||m.ensureActiveCommunity(),n.value&&h()}),(e,s)=>(d(),r("div",K,[t("section",O,[s[5]||(s[5]=t("div",{class:"hero-chip"},[t("span",{class:"i-lucide-layout-dashboard text-sm"}),y(" Console ")],-1)),s[6]||(s[6]=t("p",{class:"hero-subtitle"},"運営コミュニティ",-1)),t("h1",Q,a(_.value||"未選択のコミュニティ"),1),t("p",W,a(o.value?`役割: ${E.value}`:"まずはコミュニティを登録しましょう"),1),o.value?(d(),r("button",{key:0,class:"hero-switch",type:"button",onClick:M},[...s[0]||(s[0]=[t("span",{class:"i-lucide-building-2"},null,-1),y(" コミュニティを切り替える ",-1)])])):(d(),r("button",{key:1,class:"hero-switch hero-switch--primary",type:"button",onClick:k},[...s[1]||(s[1]=[t("span",{class:"i-lucide-sparkles"},null,-1),y(" コミュニティを作成 ",-1)])])),t("div",X,[t("div",Y,[s[2]||(s[2]=t("p",null,"今月の収入",-1)),t("strong",null,a(o.value?b.value.monthRevenueText:"---"),1)]),t("div",Z,[s[3]||(s[3]=t("p",null,"今月のイベント",-1)),t("strong",null,a(o.value?b.value.eventCount:"--"),1)]),t("div",tt,[s[4]||(s[4]=t("p",null,"申込数",-1)),t("strong",null,a(o.value?b.value.registrationCount:"--"),1)])])]),t("section",st,[t("button",{class:"action-card",type:"button",onClick:k},[...s[7]||(s[7]=[t("span",{class:"action-icon i-lucide-sparkles"},null,-1),t("div",null,[t("p",{class:"action-title"},"コミュニティ作成"),t("p",{class:"action-desc"},"新しいコミュニティを登録")],-1)])]),t("button",{class:c(["action-card",{"is-disabled":!o.value}]),type:"button",onClick:L},[...s[8]||(s[8]=[t("span",{class:"action-icon i-lucide-plus"},null,-1),t("div",null,[t("p",{class:"action-title"},"新しいイベント"),t("p",{class:"action-desc"},"イベントを作成して公開")],-1)])],2),t("button",{class:c(["action-card",{"is-disabled":!o.value}]),type:"button",onClick:f},[...s[9]||(s[9]=[t("span",{class:"action-icon i-lucide-calendar-search"},null,-1),t("div",null,[t("p",{class:"action-title"},"イベント管理"),t("p",{class:"action-desc"},"登録状況と参加者を確認")],-1)])],2),t("button",{class:c(["action-card",{"is-disabled":!o.value}]),type:"button",onClick:T},[...s[10]||(s[10]=[t("span",{class:"action-icon i-lucide-piggy-bank"},null,-1),t("div",null,[t("p",{class:"action-title"},"収益と入金"),t("p",{class:"action-desc"},"入金設定・請求を確認")],-1)])],2),t("button",{class:c(["action-card",{"is-disabled":!o.value}]),type:"button",onClick:S},[...s[11]||(s[11]=[t("span",{class:"action-icon i-lucide-settings"},null,-1),t("div",null,[t("p",{class:"action-title"},"プランと設定"),t("p",{class:"action-desc"},"プラン変更や通知設定")],-1)])],2),t("button",{class:c(["action-card",{"is-disabled":!o.value}]),type:"button",onClick:P},[...s[12]||(s[12]=[t("span",{class:"action-icon i-lucide-pencil"},null,-1),t("div",null,[t("p",{class:"action-title"},"社群情報を編集"),t("p",{class:"action-desc"},"紹介文・タグ・公開設定を更新")],-1)])],2),t("button",{class:c(["action-card",{"is-disabled":!o.value}]),type:"button",onClick:B},[...s[13]||(s[13]=[t("span",{class:"action-icon i-lucide-external-link"},null,-1),t("div",null,[t("p",{class:"action-title"},"公開ページを見る"),t("p",{class:"action-desc"},"社群ポータルを確認（ユーザー側表示）")],-1)])],2)]),t("section",et,[t("div",{class:"section-head"},[s[14]||(s[14]=t("div",null,[t("p",{class:"section-label"},"イベントの進行状況"),t("h2",null,"最新イベント")],-1)),t("button",{class:"link-button",type:"button",onClick:f},"一覧を見る")]),t("div",nt,[(d(!0),r(H,null,J(g.value,l=>(d(),r("button",{key:l.id,class:"event-card",type:"button",onClick:x=>I(l.id)},[t("div",{class:c(["event-status",N(l.status)])},a(D(l.status)),3),t("p",lt,a(l.dateTimeText),1),t("h3",null,a(l.title),1),t("p",at,a(l.entrySummary),1)],8,ot))),128)),g.value.length?z("",!0):(d(),r("div",it," まだイベントがありません。新しい企画を始めましょう。 "))])])]))}}),dt=G(ut,[["__scopeId","data-v-032d3599"]]);export{dt as default};
